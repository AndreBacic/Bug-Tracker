@using DragonflyDataLibrary
@using DragonflyMVCApp.Controllers
@model UserModel
@{
    ViewData["Title"] = $"Welcome, {User.ClaimValue(UserClaimsIndex.Name)}";
}
<div class="min-h-full w-full flex flex-col justify-center items-center bg-transparent">
    <div class="mt-6 w-5/6 max-w-3xl rounded-xl bg-neutral-700 p-2">
        <h1 class="w-full border-b-2 border-lime-700 py-1 pl-[1px] text-2xl">
            All Projects
            <a asp-controller="Home" asp-action="CreateProject"
                class="float-right rounded-lg bg-lime-500 p-1 text-lg text-black">
                + New</a>
        </h1>
        <form asp-action="Home" asp-controller="Home" method="post" class="w-full border-b border-lime-500 p-2">
            <input class="w-[calc(100%-4rem)] bg-neutral-700 p-2 text-md" type="text" name="search"
                placeholder="Search for project" />
            <button class="w-16 rounded-xl bg-lime-500 p-1 text-lg text-black" type="submit">
                Search</button>
        </form>
    </div>
    @foreach (var project in Model.Projects)
    {
        <a asp-controller="Home" asp-action="Project" asp-route-id="@project.Id"
        class="my-3 w-5/6 max-w-3xl rounded-2xl bg-neutral-700 p-2">
            <h1 class="w-full border-b border-lime-700 text-2xl">@project.Title</h1>
            <p class="py-0.5">@project.Description</p>
            <div class="w-full grid grid-cols-2 grid-rows-2">
                <div class="w-full p-2 col-span-2">Due: @project.Deadline.ToString("dd-MM-yyyy")</div>
                <div class="w-full p-2">$ @project.Tasks.Sum(t => t.Cost).ToString("0.##")</div>
                <div class="w-full p-2">Tasks: @project.Tasks.Count</div>
            </div>
        </a>
    }
</div>
